#!/bin/sh
## Home session initialization.

SOURCEDIR="$HOME/dataperso"
[ -z "$XDG_CONFIG_HOME" ] && XDG_CONFIG_HOME="$HOME/.config"
[ -z "$XDG_DATA_HOME" ] && XDG_DATA_HOME="$HOME/.local/share"
[ -z "$XDG_DATA_DIRS" ] && XDG_DATA_DIRS="/usr/local/share"

## Temp folder
echo "==> 'temp' folder"
mkdir -p "$HOME/temp"
echo

if [ -d "$SOURCEDIR/contacts" ]; then
	echo "==> Abook"
	ln -snf "$SOURCEDIR/contacts" "$HOME/.abook"
	echo
fi

if command -v mutt >/dev/null 2>&1; then
	echo "==> Mutt"
	[ -d "$SOURCEDIR" ] && ln -snf "$SOURCEDIR/mails" "$HOME/.mutt.d"
	mkdir -p "$HOME/.cache/mutt/headers"
	mkdir -p "$HOME/.cache/mutt/messages"
	echo
fi

if [ -d "$SOURCEDIR/todo" ]; then
	echo "==> To-Do"
	ln -snf "$SOURCEDIR/todo/todo.org" "$HOME/todo.org"
	echo
fi

## Bookmarks
if [ -d "$SOURCEDIR" ]; then
	echo "==> Bookmarks"
	if [ -z "$BROWSER" ]; then
		echo "Variable BROWSER is not set."
	else
		case "$BROWSER" in
		dwb)
			BOOKMARKS="$XDG_CONFIG_HOME/$BROWSER/default/"
			QUICKMARKS="$XDG_CONFIG_HOME/$BROWSER/default/" ;;
		qutebrowser)
			mkdir -p "$XDG_CONFIG_HOME/$BROWSER/bookmarks"
			BOOKMARKS="$XDG_CONFIG_HOME/$BROWSER/bookmarks/urls"
			QUICKMARKS="$XDG_CONFIG_HOME/$BROWSER/" ;;
		*)
			BOOKMARKS="$XDG_CONFIG_HOME/$BROWSER/"
			QUICKMARKS="$XDG_CONFIG_HOME/$BROWSER/" ;;
		esac
		ln -sf "$SOURCEDIR/bookmarks/bookmarks" "$BOOKMARKS"
		ln -sf "$SOURCEDIR/bookmarks/quickmarks" "$QUICKMARKS"
	fi
	echo
fi

## News
if command -v newsbeuter >/dev/null 2>&1; then
	echo "==> Newsbeuter"
	mkdir -p "$XDG_DATA_HOME/newsbeuter"
	[ -d "$SOURCEDIR" ] && ln -sf "$SOURCEDIR/news/urls" "$XDG_CONFIG_HOME/newsbeuter/"
	[ -d "$SOURCEDIR" ] && ln -sf "$SOURCEDIR/news/news_starred" "$XDG_CONFIG_HOME/newsbeuter/"
	echo
fi

## Launchers
if [ -d "$SOURCEDIR" ]; then
	echo "==> Launchers"
	ln -snf "$SOURCEDIR/launchers" "$HOME/.launchers"
	echo
fi

## Temp scripts
if [ -d "$SOURCEDIR" ]; then
	echo "==> Hackpool"
	ln -snf "$SOURCEDIR/hackpool" "$HOME/.hackpool"
	echo
fi

## Go workspace
if [ ! -d "$HOME/.go" ]; then
	echo "==> Go"
	mkdir "$HOME/.go"
	echo
fi
