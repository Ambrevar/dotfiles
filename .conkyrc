-- -*- mode: lua; -*-

conky.config = {
	out_to_x = false,
	background = false,
	cpu_avg_samples = 2,
	net_avg_samples = 2,
	no_buffers = true,
	out_to_console = true,
	out_to_stderr = false,
	extra_newline = false,
	update_interval = 1.0,
	uppercase = false,
	use_spacer = left,
	times_in_seconds = true,
};

-- Colors are in dzen2 format.
conky.text =
[[^fg(grey)${time %a %d %b %R} \
       \
^fg(grey)CPU:^fg(DeepSkyBlue)$cpu% \
^fg(grey)RAM:^fg(DeepSkyBlue)${if_match ${to_bytes $memeasyfree} < 536870912}^fg(Red)${endif}$memperc% \
^fg(grey)↓^fg(DeepSkyBlue)${eval $${downspeedf ${gw_iface}}} \
^fg(grey)↑^fg(DeepSkyBlue)${eval $${upspeedf ${gw_iface}}} \
${if_match "${exec amixer get Master -M | grep -oE '\[on\]'}" == "[on]"}^fg(grey)♪^fg(DeepSkyBlue)${exec amixer get Master -M | grep -oE "[0-9]*%"}${endif} \
${if_existing .mu/}^fg(grey)✉^fg(DeepSkyBlue)${execi 30 mu find --nocolor --sortfield=d --maxnum=500 flag:unread AND NOT flag:trashed | wc -l} ${endif}\
${if_match $battery_percent != 0}^fg(grey)⚡^fg(DeepSkyBlue)${if_match ${battery_time} <= 600}^fg(Red)${endif}${battery_short}: ${format_time ${battery_time} "(\dd )(\hh )\mmin"} ${endif}\
${if_match ${to_bytes ${diskio sda}} > 1048576}^fg(grey)sda:^fg(DeepSkyBlue)${diskio sda}${endif} \
${if_match ${to_bytes ${diskio sdb}} > 1048576}^fg(grey)sdb:^fg(DeepSkyBlue)${diskio sdb}${endif} \
${if_match ${to_bytes ${diskio sdc}} > 1048576}^fg(grey)sdc:^fg(DeepSkyBlue)${diskio sdc}${endif} \
]]

-- TODO: Unread mail with native 'new_mails' does not seem to support totals.
-- TODO: Change color when e-mails are not 0?
-- TODO: Add playing track (emacsclient)
-- TODO: Conditional display of network, sound.
-- Probably need $lua+$eval for most of the TODOs.
