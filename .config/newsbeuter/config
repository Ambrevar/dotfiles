datetime-format %F
feed-sort-order firsttag
reload-threads 4
show-keymap-hint no
text-width "`echo $MANWIDTH`"

bookmark-cmd "~/.config/newsbeuter/bookmark.sh"

## Open 'youtube' or 'youtu.be' with mpv, use $BROWSER for other pages.
## To run in the background we append a single '&' that will be valid for both
## commands unless the 'mpv' job ends with stream redication. Strange shell
## syntax?
browser "echo %u | grep -q 'youtu.\\?be' && mpv >/dev/null 2>&1 %u || $BROWSER %u >/dev/null 2>&1 &"

## Use macro to change the video quality.
## Note that backslashes need to be quadrupled.
macro l set browser "echo %u | grep -q 'youtu.\\\\?be' && mpv >/dev/null 2>&1 --ytdl-format='[height<=?480]' %u || $BROWSER %u >/dev/null 2>&1 &"
macro h set browser "echo %u | grep -q 'youtu.\\\\?be' && mpv >/dev/null 2>&1 %u || $BROWSER %u >/dev/null 2>&1 &"

## w3m does a better job at rendering HTML (e.g. at displaying source code), but
## the internal renderer is the only one that supports URIs.
macro w set html-renderer "w3m -dump -T text/html"
macro i set html-renderer internal

## TODO: It would be nice to be able to set 'text-width' dynamically. Sadly the configuration will be read only once.
## Sourcing a config file does not seem to work either.
# macro ^L set text-width "`[ $(tput cols) -gt $MANWIDTH ] && echo $MANWIDTH || echo 0`"
macro m set text-width "`echo $MANWIDTH`"
macro n set text-width 0

## Make bindings more vi-friendly and consistent with Mutt.
bind-key j down
bind-key k up
bind-key g home
bind-key G end
bind-key s sort
bind-key S rev-sort
bind-key ^S save
bind-key ^D pagedown
bind-key ^U pageup
bind-key o open-in-browser-and-mark-read articlelist
bind-key w toggle-article-read articlelist
unbind-key C
unbind-key O
unbind-key D
unbind-key N
unbind-key A feedlist

## Inspired from cmus' night theme
## TODO: When following issue is fixed,
## https://github.com/akrennmair/newsbeuter/issues/528
## restore 'black' to default.
color background white black
color info color45 color234 bold
color listfocus color45 color235
color listnormal white black
color listnormal_unread color46 black
color listfocus_unread color118 color235
color article white black

highlight article "^(Feed|Title|Author|Links?|Date):" white black bold
